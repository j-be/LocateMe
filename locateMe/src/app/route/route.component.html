<p-dialog header="Route" modal="true" [(visible)]="display"
          blockScroll="true">
  <div *ngIf="routes == null" style="overflow: hidden">
    <p-progressSpinner></p-progressSpinner>
  </div>

  <div *ngIf="routes != null && tripDetail == null">
    <div class="trip" *ngFor="let trip of routes.trips" (click)="tripDetail = trip.trip">
      <p-card>
        <span>{{ formatPoint(trip.trip.legs[0].points[0]) }}</span><br/>
        <span class="duration">{{ trip.trip.duration }}</span>
        <span>
        <span class="transport-chip"
              [ngClass]="getStyleForTransportationType(leg.mode.type)"
              *ngFor="let leg of trip.trip.legs">{{ leg.mode.number }}</span>
      </span><br/>
        <span>{{ formatPoint(trip.trip.legs[trip.trip.legs.length - 1].points[1]) }}</span>
      </p-card>
    </div>
  </div>

  <div *ngIf="tripDetail != null">
    <button pButton type="button"
            label="Back" icon="pi pi-arrow-left"
            (click)="tripDetail = null"></button>
    <table>
      <tbody>
      <ng-container *ngFor="let leg of tripDetail.legs">
        <tr>
          <td>{{ leg.points[0].dateTime.time }}</td>
          <td>&#9675;</td>
          <td class="station-name">{{ leg.points[0].name }}</td>
        </tr>
        <tr>
          <td></td>
          <td style="text-align: center">&#124;</td>
          <td>
            <span class="transport-chip" [ngClass]="getStyleForTransportationType(leg.mode.type)">{{ leg.mode.number }}</span>
            <small>{{ leg.mode.destination }}</small>
          </td>
        </tr>
        <tr>
          <td>{{ leg.points[1].dateTime.time }}</td>
          <td>&#9675;</td>
          <td class="station-name">{{ leg.points[1].name }}</td>
        </tr>
        <tr>
          <td colspan="3"><hr></td>
        </tr>
      </ng-container>
      </tbody>
    </table>
  </div>
</p-dialog>

<button pButton type="button" id="route" class="on-map"
        label="Route"
        (click)="openDialog()" *ngIf="locationService.hasLocation()"></button>
