<app-layout>

  <div role="nav" class="nav-wrapper grey lighten-4">
    <div class="title">Routes</div>
    <div class="right-align"><a routerLink="../"><i class="material-icons">close</i></a></div>
  </div>

  @if (fetching$ | async) {
    <div style="overflow: hidden; text-align: center">
      <p-progressSpinner></p-progressSpinner>
    </div>
  } @else {
    @if ((routes$ | async); as routes) {
      @if (routes.trips?.length) {
        @for (trip of routes.trips; track trip) {
          <div class="trip card" (click)="showDetails(trip)" tabindex="0">
            <div class="card-content">
              <span class="card-title">{{ formatPoint(trip.legs[0].points[0]) }}</span><br/>
              <div class="flex-row">
                <div class="transport-sequence flex-row">
                  @for (leg of trip.legs; track leg) {
                    <div>
                      <app-public-transport-chip [line]="leg.mode"></app-public-transport-chip>
                    </div>
                  }
                </div>
                <div class="duration">{{ trip.duration }}</div>
              </div>
              <span>{{ formatPoint(trip.legs[trip.legs.length - 1].points[1]) }}</span>
            </div>
          </div>
        }
      } @else {
        <div>
          <p-message severity="warn" text="Sorry, could not find any routes."></p-message>
        </div>
      }
    }
  }


</app-layout>
